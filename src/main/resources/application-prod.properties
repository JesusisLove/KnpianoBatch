# ==============================================
# KnPiano Batch 生产环境配置
# 用于生产环境部署和定时任务执行
# ==============================================

# MySQL Database Configuration - 生产环境
# TODO: 请根据实际生产环境修改以下数据库配置
spring.datasource.username=${DB_USERNAME:batch_user}
spring.datasource.password=${DB_PASSWORD:your_production_password}
spring.datasource.url=${DB_URL:jdbc:mysql://prod-db-server:3306/KNStudent_PROD}

# Logging Configuration - 生产环境（精简日志）
logging.level.root=INFO
logging.level.com.liu.knbatch=INFO
logging.level.org.springframework.batch=INFO
logging.level.org.apache.ibatis=WARN
logging.level.com.liu.knbatch.dao=INFO
logging.level.org.springframework.scheduling=INFO

# Log File Configuration - 生产环境（绝对路径）
# 注意：logback-spring.xml 会根据 prod profile 使用绝对路径
logging.file.name=/var/log/knpiano-batch/knpiano-batch.log

# 数据库连接池配置 - 生产环境（较大连接池）
spring.datasource.hikari.maximum-pool-size=30
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.idle-timeout=900000
spring.datasource.hikari.max-lifetime=3600000

# 生产环境特殊配置
# 禁用不必要的功能
spring.jmx.enabled=false

# 生产环境标识
app.environment=production
app.debug.enabled=false

# 生产环境安全配置
# 定时任务配置 - 生产环境（更多线程）
spring.task.scheduling.pool.size=5
spring.task.scheduling.thread-name-prefix=knpiano-prod-scheduler-

# 生产环境监控配置
# 如果使用 Spring Boot Actuator
# management.endpoints.web.exposure.include=health,info,metrics
# management.endpoint.health.show-details=when-authorized

# 生产环境批处理配置
app.batch.timeout.seconds=7200
app.batch.retry.max-attempts=5
app.batch.notification.enabled=true

# 生产环境数据库优化
spring.datasource.hikari.leak-detection-threshold=300000
spring.datasource.hikari.validation-timeout=30000