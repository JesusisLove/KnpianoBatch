# ==============================================
# KnPiano Batch 生产环境配置
# 用于: 生产环境部署 + 定时任务执行
# ==============================================

# MySQL Database Configuration - 生产环境
# 修改为您实际的数据库配置
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:7654321}
spring.datasource.url=${DB_URL:jdbc:mysql://192.168.50.101:49168/KNStudent}

# Logging Configuration - 生产环境（精简日志，提高性能）
logging.level.root=INFO
logging.level.com.liu.knbatch=INFO
logging.level.org.springframework.batch=INFO
logging.level.org.apache.ibatis=WARN
logging.level.com.liu.knbatch.dao=INFO
logging.level.org.springframework.scheduling=INFO

# Log File Configuration - 生产环境
# 使用相对路径，避免权限问题
logging.file.name=logs/knpiano-batch.log

# 数据库连接池配置 - 生产环境（适中配置）
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.idle-timeout=900000
spring.datasource.hikari.max-lifetime=3600000

# 生产环境优化配置
spring.jmx.enabled=false

# 定时任务配置 - 生产环境
spring.task.scheduling.pool.size=3
spring.task.scheduling.thread-name-prefix=knpiano-prod-scheduler-

# 生产环境标识
app.environment=production
app.debug.enabled=false

# 批处理配置 - 生产环境
app.batch.timeout.seconds=3600
app.batch.retry.max-attempts=3