# ==============================================
# KnPiano Batch 主配置文件
# 包含所有环境通用的配置
# ==============================================

# Application Configuration
spring.application.name=knpiano-batch

# 设置Web应用类型为none（批处理不需要Web服务器）
spring.main.web-application-type=none

# 允许bean覆盖
spring.main.allow-bean-definition-overriding=true

# 应用管理配置（用于服务模式）
# 防止应用在没有web容器时立即退出
spring.main.keep-alive=true

# MySQL Database Configuration (通用配置)
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection Pool Configuration (通用配置)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# MyBatis Configuration (通用配置)
mybatis.config-location=classpath:mybatis/mybatis-config.xml
mybatis.mapper-locations=classpath:mybatis/mapper/*.xml
mybatis.type-aliases-package=com.liu.knbatch.entity

# Spring Batch Configuration (通用配置)
spring.batch.job.enabled=false
spring.batch.jdbc.initialize-schema=always

# 定时任务配置 (通用配置)
spring.task.scheduling.pool.size=2
spring.task.scheduling.thread-name-prefix=knpiano-scheduler-
spring.task.scheduling.shutdown.await-termination=true
spring.task.scheduling.shutdown.await-termination-period=30s

# Jackson时区配置 (通用配置)
spring.jackson.time-zone=GMT+8

# Log Pattern (通用配置)
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%logger{50}] - %msg%n

# Log File Configuration (通用配置)
logging.logback.rollingpolicy.max-file-size=100MB