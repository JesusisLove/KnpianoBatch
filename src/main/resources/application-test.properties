# ==============================================
# KnPiano Batch 测试环境配置
# 用于单元测试和集成测试
# ==============================================

# MySQL Database Configuration - 测试环境
# 使用测试数据库，避免影响开发数据
spring.datasource.username=root
spring.datasource.password=7654321
spring.datasource.url=jdbc:mysql://192.168.50.101:49168/KNStudent_TEST

# 或者使用H2内存数据库进行测试（可选）
# spring.datasource.url=jdbc:h2:mem:testdb
# spring.datasource.driver-class-name=org.h2.Driver
# spring.datasource.username=sa
# spring.datasource.password=

# Logging Configuration - 测试环境（详细日志用于调试）
logging.level.root=DEBUG
logging.level.com.liu.knbatch=DEBUG
logging.level.org.springframework.batch=DEBUG
logging.level.org.apache.ibatis=DEBUG
logging.level.com.liu.knbatch.dao=TRACE
logging.level.org.springframework.scheduling=DEBUG
logging.level.org.springframework.test=DEBUG

# Log File Configuration - 测试环境
logging.file.name=target/test-logs/knpiano-batch-test.log

# 数据库连接池配置 - 测试环境（小连接池）
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=10000

# Spring Batch Configuration - 测试环境
spring.batch.job.enabled=false
spring.batch.jdbc.initialize-schema=always

# 测试环境特殊配置
# 禁用定时任务
spring.task.scheduling.pool.size=1

# 测试环境标识
app.environment=test
app.debug.enabled=true

# 测试数据配置
app.test.data.cleanup=true
app.test.data.seed=true

# 快速失败配置（用于测试）
app.batch.timeout.seconds=60
app.batch.retry.max-attempts=1